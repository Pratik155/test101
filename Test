from PIL import Image, ImageDraw, ImageFont, ImageOps
import textwrap

# Create a white background image
width = 1920
height = 1080
background_color = (255, 255, 255)
image = Image.new("RGB", (width, height), background_color)

# Define the box coordinates and dimensions
box_color = (169, 169, 169)
box_x1 = 51
box_y1 = 756
box_x2 = 1204
box_y2 = 1027

# Draw the box on the image
draw = ImageDraw.Draw(image)
draw.rectangle([box_x1, box_y1, box_x2, box_y2], fill=box_color)

# Define the text to fill the box (lorem ipsum)
text = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

# Load a font and set its size
font_size = 24
font = ImageFont.load_default()

# Wrap the text to fit within the width of the box
wrapped_text = textwrap.fill(text, width=35)

# Calculate text width and height
text_width, text_height = draw.textsize(wrapped_text, font=font)

# Calculate the position to center the text in the box
text_x = (box_x1 + box_x2 - text_width) // 2
text_y = (box_y1 + box_y2 - text_height) // 2

# Draw the text on the image
draw.text((text_x, text_y), wrapped_text, fill=(0, 0, 0), font=font)

# Apply perspective transform to warp the text
bbox = (text_x, text_y, text_x + text_width, text_y + text_height)
warped_text = image.crop(bbox)
warped_text = warped_text.transform(warped_text.size, Image.PERSPECTIVE, (1, 0.2, 0, 0.2, 1, 0, 0, 0))

# Paste the warped text back onto the original image
image.paste(warped_text, bbox)

# Save the image
image.save("output_image.png")

# Display the image
image.show()
